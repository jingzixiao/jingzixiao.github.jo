<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        canvas{
            display: block;
            margin:0 auto;
        }
    </style>

</head>
<body>
    <canvas width="800" height="400" style="border: 1px solid red;"></canvas>
    <script src="Pipe.js"></script>
    <script>

        var cs=document.querySelector('canvas');
        var ctx=cs.getContext('2d');

        var upImg=new Image();
        var downImg=new Image();
        upImg.src='../imgs/pipe2.png';
        downImg.src='../imgs/pipe1.png';

        upImg.onload=function(){
            var  p=new Pipe({
                upImg:upImg,
                downImg:downImg,
                ctx:ctx,
                index:0
            })
            var  p1=new Pipe({
                upImg:upImg,
                downImg:downImg,
                ctx:ctx,
                index:1
            })
            var  p2=new Pipe({
                upImg:upImg,
                downImg:downImg,
                ctx:ctx,
                index:2
            })

            var  p3=new Pipe({
                upImg:upImg,
                downImg:downImg,
                ctx:ctx,
                index:3
            })

            var  p4=new Pipe({
                upImg:upImg,
                downImg:downImg,
                ctx:ctx,
                index:4
            })

            setInterval(function(){
                ctx.clearRect(0,0,cs.width,cs.height);
                ctx.beginPath();
                p.render();
                p1.render();
                p2.render();
                p3.render();
                p4.render();
            },10);

            //碰撞检测
            cs.onmousemove=function(e){              ;
                var x=e.offsetX
                var y=e.offsetY;
                if(ctx.isPointInPath(x,y)){
                    alert('别碰我！讨厌~');
                }
            }


        }
    </script>
</body>
</html>